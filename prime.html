<!DOCTYPE html>
<html lang="en">

<!-- See: https://rtestardi.github.io/pages/prime.html -->

<head>
</head>

<body onload='Body()'>

<canvas id="canvas" width=512 height=256></canvas>
<p id=details>

<script>
'use strict';

var max = 100000;
var ctx;

function point(x, y)
{
    ctx.beginPath();
    ctx.arc(x, y, 2, 0, 2*Math.PI, false);
    ctx.fill();
}

function isprime(n)
{
    var i;
    for (i = 2; i < n; i++) {
        if (n%i == 0) {
            return false;
        }
    }
    return true;
}

function GraphPrimes()
{
   var i;
   var n;
   n = 0;
   for (i = 0; i < max; i++) {
      if (isprime(i)) {
          n++;
      }
      if (i%(Math.trunc(max/512)) == 0) {
        point(Math.trunc(i/(max/512)), 256-(n/100));
      }
   }

   var details = document.getElementById('details');
   details.innerHTML = "max = " + max + " n = " + n;
}

// the user loaded the webpage; start the program
function Body()
{
    // find out drawing canvas context
    var canvas = document.getElementById('canvas');
    ctx = canvas.getContext('2d');

   setTimeout(GraphPrimes, 1);
}

</script>
</body>
</html>